(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a640934"],{"97a3":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container calendar-list-container"},[n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.tableOption,data:e.list,"table-loading":e.listLoading,"before-open":e.beforeOpen,permission:e.permissionList},on:{"on-load":e.getPage,"search-change":e.searchChange,"refresh-change":e.refreshChange,"row-update":e.handleUpdate,"row-save":e.handleSave,"row-del":e.handleDel},scopedSlots:e._u([{key:"menuListForm",fn:function(t){return[n("div",[n("el-tree",{ref:"menuTree",staticClass:"filter-tree",attrs:{disabled:"",data:e.menuData,"check-strictly":!1,"node-key":"menuId","highlight-current":"",props:e.defaultProps,"default-checked-keys":e.checkedDsScope,"show-checkbox":"","default-expand-all":""},on:{"check-change":e.checkChange}})],1)]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)],1)},r=[],o=n("b775");function i(e){return Object(o["a"])({url:"/role/add",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/role/update",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/role/delete/".concat(e),method:"get"})}function u(e){return Object(o["a"])({url:"/role/find/".concat(e),method:"get"})}function l(e){return Object(o["a"])({url:"/role/list",method:"post",data:e})}function d(){return Object(o["a"])({url:"/role/keyPrefix",method:"get"})}var h={dialogDrag:!1,dialogWidth:"520",border:!0,index:!0,indexLabel:"序号",stripe:!0,menuAlign:"center",align:"center",viewBtn:!0,excelBtn:!1,columnBtn:!1,printBtn:!1,menuType:"text",searchMenuSpan:6,searchShow:!0,searchIndex:3,searchIcon:!0,labelSuffix:" ",column:[{label:"角色名称",prop:"roleName",search:!0,span:24,rules:[{required:!0,message:"角色名称不能为空",trigger:"blur"}]},{label:"角色等级",prop:"roleKey",type:"select",span:24,formslot:!0,sortable:!1,search:!0,rules:[{required:!0,message:"请选择角色等级",trigger:"blur"}],props:{label:"describe",value:"prefix"},dicData:[]},{label:"排序",prop:"roleSort",type:"number",span:24,rules:[{required:!0,message:"排序不能为空",trigger:"blur"}]},{label:"角色权限",prop:"menuList",span:24,formslot:!0,showColumn:!1,hide:!0,rules:[{required:!0,message:"请设置角色权限",trigger:"blur"}]}]},f=n("fa99"),g={name:"table_role",data:function(){return{tableOption:h,checkedKeys:[],checkedDsScope:[],defaultProps:{label:"menuName",value:"menuId"},page:{total:0,currentPage:1,pageSize:10},list:[],listLoading:!1,form:{},id:void 0,roleCode:void 0,rolesOptions:void 0,dialogPermissionVisible:!1,dialogLoading:!1,roleLevel:[],menuData:[]}},created:function(){this.getRoleLevel(),this.getMenuList()},computed:{permissionList:function(){return{}}},watch:{roleLevel:{handler:function(e,t){var n=this.tableOption.column[1];n.dicData=e},deep:!0}},methods:{getPage:function(e,t){var n=this;this.listLoading=!0,l(Object.assign({pageNum:e.currentPage,pageSize:e.pageSize,descs:this.page.descs,ascs:this.page.ascs},t)).then((function(e){n.list=e.data,n.listLoading=!1})).catch((function(){n.listLoading=!1}))},refreshChange:function(e){this.getPage(this.page)},searchChange:function(e,t){this.page.currentPage=1,this.getPage(this.page,this.filterForm(e)),t()},getRoleLevel:function(){var e=this;d().then((function(t){e.roleLevel=t.data}))},getMenuList:function(){var e=this;Object(f["d"])().then((function(t){e.menuData=t.data}))},checkChange:function(e,t,n){this.$refs.menuTree.getHalfCheckedKeys();var a=this.$refs.menuTree.getCheckedKeys();this.form.menuList=a},beforeOpen:function(e,t){var n=this;window.openType=t,"view"!=t&&"edit"!=t||u(this.form.roleId).then((function(e){n.form=e.data,n.checkedDsScope=e.data.menuList})),e()},handleDel:function(e,t){var n=this,a=this;this.$confirm("是否确认删除?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return c(e.roleId)})).then((function(){n.getPage(n.page),a.$message({showClose:!0,message:"删除成功",type:"success"})})).catch((function(){}))},handleSave:function(e,t,n){var a=this;i(this.form).then((function(){a.getPage(a.page),t(),a.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})})).catch((function(){n()}))},handleUpdate:function(e,t,n,a){var r=this;s(this.form).then((function(){r.getPage(r.page),n(),r.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3})})).catch((function(){a()}))}}},p=g,m=n("2877"),b=Object(m["a"])(p,a,r,!1,null,null,null);t["default"]=b.exports},fa99:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return s}));var a=n("b775");function r(e){return Object(a["a"])({url:"/menu/add",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/menu/edit",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/menu/delete/".concat(e),method:"get"})}function s(){return Object(a["a"])({url:"/menu/menuList",method:"get"})}}}]);