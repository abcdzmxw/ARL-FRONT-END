(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2422c00e"],{6287:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container calendar-list-container"},[a("basic-container",[a("avue-crud",{ref:"crud",attrs:{option:e.tableOption,page:e.page,data:e.list,search:e.search,"table-loading":e.listLoading,"before-open":e.beforeOpen,permission:e.permissionList},on:{"update:page":function(t){e.page=t},"update:search":function(t){e.search=t},"on-load":e.getPage,"search-change":e.searchChange,"refresh-change":e.refreshChange,"row-update":e.handleUpdate,"row-save":e.handleSave,"row-del":e.handleDel},scopedSlots:e._u([{key:"menu",fn:function(t){var n=t.row,s=t.index;return[["0","3"].includes(n.status)?[a("div",["3"!=n.status?a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-check"},on:{click:function(t){return e.handleSubmit(n)}}},[e._v("提交审核")]):e._e(),a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-edit"},on:{click:function(t){return e.handleControl("edit",n,s)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-delete"},on:{click:function(t){return e.handleControl("del",n,s)}}},[e._v("删除")])],1)]:e._e(),1==n.status?[a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-close"},on:{click:function(t){return e.handleSubmit(n)}}},[e._v("撤销提交")])]:e._e()]}},{key:"status",fn:function(t){var n=t.row;return["0"==n.status?a("el-tag",{attrs:{size:"small",type:"info"}},[e._v("待提交")]):e._e(),"1"==n.status?a("el-tag",{attrs:{size:"small",type:"warning"}},[e._v("待审核")]):e._e(),"2"==n.status?a("el-tag",{attrs:{size:"small",type:"success"}},[e._v("审核通过")]):e._e(),"3"==n.status?a("el-tag",{attrs:{size:"small",type:"danger"}},[e._v("审核不通过")]):e._e()]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)],1)},s=[],r=a("5530"),i=(a("d3b7"),a("c4d3")),c={dialogDrag:!1,dialogHeight:560,labelWidth:"130",border:!0,index:!0,indexLabel:"序号",stripe:!0,menuAlign:"center",menuWidth:360,align:"center",viewBtn:!1,excelBtn:!1,addBtn:!0,delBtn:!1,editBtn:!1,columnBtn:!1,printBtn:!1,menuType:"text",searchMenuSpan:6,searchShow:!0,searchIndex:3,searchIcon:!0,size:"mini",column:[{label:"标题",prop:"title",span:12,search:!0,rules:[{required:!0,message:"请填写",trigger:"blur"}]},{label:"站点",prop:"domain",span:12,search:!0,rules:[{required:!0,message:"请填写",trigger:"blur"}]},{label:"数据包",prop:"flaw_data_package",span:12,type:"textarea",rules:[{required:!0,message:"请填写",trigger:"blur"}]},{label:"详细信息",prop:"flaw_detail_data",span:12,type:"textarea",rules:[{required:!0,message:"请填写",trigger:"blur"}]},{label:"状态",prop:"status",display:!1,search:!0,searchType:"select",dicData:[{label:"待提交",value:"0"},{label:"待审核",value:"1"},{label:"审核通过",value:"2"},{label:"审核不通过",value:"3"}]}]},o={name:"MenuList",components:{},data:function(){return{search:{},tableOption:c,page:{total:0,currentPage:1,pageSize:10,ascs:[],descs:[]},paramsSearch:{},list:[],listLoading:!1,form:{},firstLevelMenuList:[]}},computed:{permissionList:function(){return{}}},watch:{},created:function(){},methods:{handleControl:function(e,t,a){"edit"===e&&this.$refs.crud.rowEdit(t,a),"del"===e&&this.$refs.crud.rowDel(t,a)},getPage:function(e,t){var a=this;this.listLoading=!0,Object(i["d"])(Object.assign({page:e.currentPage,size:e.pageSize,descs:this.page.descs,ascs:this.page.ascs},t)).then((function(e){var t=e.data;a.list=t.items,a.page.total=t.total,a.page.currentPage=t.page,a.page.pageSize=t.size,a.listLoading=!1})).catch((function(){a.listLoading=!1}))},refreshChange:function(e){this.getPage(this.page)},searchChange:function(e,t){this.page.currentPage=1,this.getPage(this.page,this.filterForm(e)),t()},beforeOpen:function(e,t){var a=this.tableOption.column[3];a.dicData=this.firstLevelMenuList,e()},handleDel:function(e,t){var a=this;this.$confirm("是否确认删除?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={id:e.id};Object(i["b"])(t).then((function(e){200==e.code?(a.$message({showClose:!0,message:e.message,type:"success"}),a.getPage(a.page)):a.$message({showClose:!0,message:e.message,type:"error"})}))})).catch((function(e){}))},handleSave:function(e,t,a){var n=this,s=this,c=Object(r["a"])({},e);Object(i["a"])(c).then((function(e){200==e.code?(s.$message({showClose:!0,message:e.message,type:"success"}),s.getPage(n.page)):(s.$message({showClose:!0,message:e.message,type:"error"}),s.getPage(n.page))})).catch((function(e){})).finally((function(){t(),a()}))},handleUpdate:function(e,t,a,n){var s=this,c=this,o=Object(r["a"])({},e);o.status="0",Object(i["g"])(o).then((function(e){200==e.code?(c.$message({showClose:!0,message:e.message,type:"success"}),c.getPage(s.page)):(c.$message({showClose:!0,message:e.message,type:"error"}),c.getPage(s.page))})).catch((function(e){})).finally((function(){a(),n()}))},handleSubmit:function(e,t){var a=this;this.$confirm("是否确认".concat("1"==e.status?"撤销审核":"提交审核","?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={status:"1"==e.status?"0":"1"};Object(i["f"])(e.id,t).then((function(e){200==e.code?(a.$message({showClose:!0,message:e.message,type:"success"}),a.getPage(a.page)):a.$message({showClose:!0,message:e.message,type:"error"})}))})).catch((function(e){}))}}},l=o,u=a("2877"),g=Object(u["a"])(l,n,s,!1,null,null,null);t["default"]=g.exports},c4d3:function(e,t,a){"use strict";a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return i})),a.d(t,"g",(function(){return c})),a.d(t,"b",(function(){return o})),a.d(t,"f",(function(){return l})),a.d(t,"e",(function(){return u}));var n=a("b775");function s(e){return Object(n["a"])({url:"/flow/pageList",method:"GET",params:e})}function r(e){return Object(n["a"])({url:"/flow/admin/pageList",method:"GET",params:e})}function i(e){return Object(n["a"])({url:"/flow/",method:"POST",data:e})}function c(e){return Object(n["a"])({url:"/flow/",method:"PATCH",data:e})}function o(e){return Object(n["a"])({url:"/flow/",method:"DELETE",data:e})}function l(e,t){return Object(n["a"])({url:"/flow/submit/".concat(e),method:"patch",data:t})}function u(e,t){return Object(n["a"])({url:"/flow/process/".concat(e),method:"patch",data:t})}}}]);